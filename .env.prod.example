# ==============================================================================
# SECURITY SPACEE - Production Environment Configuration
# ==============================================================================
# INSTRUCTIONS:
#   1. Copy this file to .env.prod
#   2. Run: ./scripts/generate-secrets.sh to generate secure JWT secret
#   3. Fill in all values (NO defaults - all are required!)
#   4. Run: ./scripts/deploy-prod.sh
# ==============================================================================

# ------------------------------------------------------------------------------
# APPLICATION VERSION
# ------------------------------------------------------------------------------
APP_VERSION=0.0.1-SNAPSHOT

# ------------------------------------------------------------------------------
# SERVER CONFIGURATION
# ------------------------------------------------------------------------------
SERVER_PORT=8080

# ------------------------------------------------------------------------------
# DATABASE CONFIGURATION (PostgreSQL)
# Must be accessible from Docker network
# ------------------------------------------------------------------------------
DB_HOST=host.docker.internal
DB_PORT=5432
DB_NAME=security_spacee_db
DB_USERNAME=spacecodee
DB_PASSWORD=CHANGE_ME_SECURE_PASSWORD
DB_POOL_SIZE=30
DB_POOL_MIN_IDLE=10

# ------------------------------------------------------------------------------
# REDIS CONFIGURATION
# ------------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_MAX_MEMORY=512mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# ------------------------------------------------------------------------------
# EMAIL CONFIGURATION (Production SMTP)
# For local testing with Mailpit, use:
#   MAIL_HOST=mailpit, MAIL_PORT=1025
# ------------------------------------------------------------------------------
MAIL_HOST=mailpit
MAIL_PORT=1025
MAIL_USERNAME=
MAIL_PASSWORD=

# ------------------------------------------------------------------------------
# JWT CONFIGURATION
# IMPORTANT: Generate with ./scripts/generate-secrets.sh
# ------------------------------------------------------------------------------
JWT_SECRET=GENERATE_ME_RUN_SCRIPTS_GENERATE_SECRETS_SH
JWT_ISSUER=security-spacee
JWT_AUDIENCE=security-spacee-api
JWT_ACCESS_EXPIRATION=900
JWT_REFRESH_EXPIRATION=604800

# ------------------------------------------------------------------------------
# SECURITY CONFIGURATION
# ------------------------------------------------------------------------------
ALLOWED_ORIGINS=https://your-frontend-domain.com
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCK_DURATION=900000

# ------------------------------------------------------------------------------
# CACHE TTL CONFIGURATION (milliseconds)
# ------------------------------------------------------------------------------
CACHE_TTL_USER_PROFILE=1800000
CACHE_TTL_USER_ROLES=900000
CACHE_TTL_PERMISSIONS=3600000
CACHE_TTL_JWT_BLACKLIST=2592000000

# ------------------------------------------------------------------------------
# SESSION CONFIGURATION (Production)
# ------------------------------------------------------------------------------
SESSION_EXPIRATION=12h
SESSION_CONCURRENT_ENABLED=true
SESSION_CONCURRENT_MAX=3
SESSION_CONCURRENT_STRATEGY=FIFO
SESSION_NOTIFY_NEW_DEVICE=true
SESSION_GEOIP_ENABLED=false
SESSION_GEOIP_DB_PATH=/data/GeoLite2-City.mmdb
SESSION_TIMEOUT_ABSOLUTE=PT12H
SESSION_TIMEOUT_IDLE=PT15M
SESSION_TIMEOUT_SLIDING=false
SESSION_TIMEOUT_WARNING=PT3M
SESSION_CLEANUP_IDLE_INTERVAL=60000
SESSION_CLEANUP_ABSOLUTE_INTERVAL=300000
SESSION_ACTIVITY_TRACKING_ENABLED=true
SESSION_ACTIVITY_TRACKING_ASYNC=true
SESSION_ACTIVITY_TRACKING_BATCH=false

# ------------------------------------------------------------------------------
# LOGGING (Production - Minimal)
# ------------------------------------------------------------------------------
LOG_LEVEL_ROOT=WARN
LOG_LEVEL_APP=INFO

# ------------------------------------------------------------------------------
# MAILPIT (Only if using --profile with-mailpit)
# ------------------------------------------------------------------------------
MAILPIT_UI_PORT=8025
